<div class="cp-checkout-steps-wrap">
    <ng-include src="'/dist/templates/directives/cp-checkout-steps.html'" ng-init="activeStep = 2"></ng-include>
</div>

<div class="container">
    <div class="cp-checkout">
        <div class="cp-checkout-main">
            <h1 class="cp-heading cp-checkout-heading">Payment details</h1>

            <p>How would you like to pay for this order?</p>

            <form class="cp-form cp-checkout-payment-form" name="checkoutForm" novalidate role="form" ng-submit="finish()">
                <fieldset class="row">
                    <div class="cp-form-group col-md-6">
                        <label class="cp-form-label" for="payment_method">Payment method</label>
                        <select class="cp-form-control"
                            id="payment_method"
                            required
                            aria-required="true"
                            ng-model="order.paymentMethod"
                            ng-options="card as card.numberMasked for card in cards">
                                <option value="">Add new card</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <ul class="payment-methods">
                            <li class="visa" ng-show="isVisaVisible">Visa</li>
                            <li class="amex" ng-show="isAmericanExpressVisible">American Express</li>
                            <li class="mastercard" ng-show="isMastercardVisible">MasterCard</li>
                            <li class="maestro" ng-show="isMaestroVisible">Maestro</li>
                            <li class="payment-method-info" ng-show="isCardExpiryDateVisible">Expires: <strong>{{ order.paymentMethod.expiryDate }}</strong></li>
                        </ul>
                    </div>
                </fieldset>

                <fieldset class="row" ng-if="!order.paymentMethod">
                    <div class="cp-form-group col-md-6">
                        <label class="cp-form-label" for="card_number">Card number</label>
                        <input class="cp-form-control"
                            id="card_number"
                            type="number"
                            autocomplete="off"
                            required
                            aria-required="true"
                            ng-maxlength="16"
                            ng-minlength="13"
                            ng-model="card.number"
                            data-braintree-name="number" />
                    </div>

                    <div class="cp-form-group cp-checkout-card-expiry-date col-md-4">
                        <label class="cp-form-label" for="card_expiry_month">Expiry date</label>
                        <select class="cp-form-control"
                            id="card_expiry_month"
                            required
                            aria-required="true"
                            ng-model="card.expirationMonth"
                            ng-options="month.value as month.label for month in monthOptions"
                            data-braintree-name="expiration_month"></select>

                        <label class="sr-only" for="card_expiry_year">Expiry year</label>
                        <select class="cp-form-control"
                            id="card_expiry_year"
                            required
                            aria-required="true"
                            ng-model="card.expirationYear"
                            ng-options="year.value as year.label for year in yearOptions"
                            data-braintree-name="expiration_year"></select>
                    </div>

                    <div class="cp-form-group col-md-2">
                        <label class="cp-form-label" for="card_cvc">
                            <abbr title="card verification code">CVC</abbr>
                        </label>
                        <input class="cp-form-control"
                            id="card_cvc"
                            type="number"
                            autocomplete="off"
                            required
                            aria-required="true"
                            ng-maxlength="3"
                            ng-minlength="3"
                            ng-model="card.cvc"
                            ng-pattern="/\d\d\d/"
                            data-braintree-name="cvc" />
                    </div>
                </fieldset>

                <input class="cp-btn cp-btn-primary cp-btn-lg" type="submit" value="Pay now ({{ order.totalAmount | currency:'Â£':2 }})" />
            </form>
        </div>

        <div class="cp-checkout-sidebar">
            <cp-checkout-review></cp-checkout-review>
        </div>
    </div>
</div>
