<div class="wrapper">
    <h1>User {{ user.humanId }}: {{ user.name }}, {{ user.email }}</h1>

    <h2>History</h2>

    <cp-history-table document-id="user.id" document-type="CityPantry\UserBundle\Document\User"></cp-history-table>

    <h2>Details</h2>

    <div id="cp-user-details">
        <p>Last login: {{ user.lastLogin | date:'dd/MM/yyyy' }}</p>
    </form>

    <h2>Edit details</h2>

    <form role="form" ng-submit="save()">
        <div class="form-group">
            <label for="cp-user-name">Name</label>
            <input class="form-control input-lg" id="cp-user-name"
                required
                ng-model="user.name" />
        </div>

        <div class="form-group">
            <label for="cp-user-name">Email</label>
            <input class="form-control input-lg" id="cp-user-email"
                required
                ng-model="user.email" />
        </div>

        <input class="btn btn-primary btn-lg" type="submit" value="Save">
    </form>

    <div ng-if="isVendor && vendor">
        <h2>Vendor user actions</h2>

        <p><a ng-href="/admin/vendor/{{ vendor.id }}">View vendor in staff page</a></p>

        <p><a ng-href="/vendor/{{ vendor.id }}">View vendor in frontend</a></p>

        <p><button class="btn btn-primary" ng-click="removeUserFromVendor()">Remove user from vendor</button></p>

        <p><button class="btn btn-primary" ng-click="changeUserPassword()">Change password</button></p>
    </div>

    <div ng-if="isVendor && !vendor">
        <h2>Vendor user actions</h2>

        <p>This user was removed from a vendor, and can no longer login to the vendor's account.</p>

        <p><button class="btn btn-primary" ng-click="changeUserPassword()">Change password</button></p>
    </div>

    <div ng-if="isCustomer">
        <h2>Customer user actions</h2>

        <p><a ng-href="/admin/customer/{{ customer.id }}">View customer in staff page</a></p>

        <p><button class="btn btn-primary" ng-click="changeUserPassword()">Change password</button></p>
    </div>

    <div ng-if="isStaff">
        <h2>Staff user actions</h2>

        <p>There aren't any actions to take on staff users, at the moment.</p>
    </div>
</div>
